<!-- index.html полный, см. предыдущую версию; сюда нужно вставить исправления welcomeName -->
// исправление welcomeName
const result = isSignInMode ? await window.signIn(email, password) : await window.signUp(email, password, displayName);
if (result.success) {
    authModal.classList.add('hidden');
    await result.user.reload();
    const updatedUser = auth.currentUser;
    const profileResult = await window.getUserProfile(updatedUser.uid);
    const welcomeName = (profileResult.success && profileResult.profile.displayName)
        ? profileResult.profile.displayName
        : (updatedUser.displayName || updatedUser.email);
    openNotificationModal(isSignInMode ? "Sign In Successful" : "Registration Successful!", `Welcome, ${welcomeName}!`);
} else {
    errorMessageEl.textContent = result.error;
    errorMessageEl.classList.remove('hidden');
}